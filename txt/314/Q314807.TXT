DOCUMENT:Q314807  18-DEC-2001  [sna]
TITLE   :LUWID Specified by SET_TP_PROPERTIES Verb May Be Overwritten
PRODUCT :Microsoft SNA Server
PROD/VER::4.0,4.0 SP1,4.0 SP2,4.0 SP3,4.0 SP4
OPER/SYS:
KEYWORDS:kbDSupport sna4 kbsna400sp1 kbsna400sp2 kbsna400sp3 kbhis2000 kbhis2000bug kbsna400sp4

======================================================================
-------------------------------------------------------------------------------
The information in this article applies to:

 - Microsoft SNA Server, versions 4.0, 4.0 SP1, 4.0 SP2, 4.0 SP3, 4.0 SP4 
 - Microsoft Host Integration Server 2000 
-------------------------------------------------------------------------------

SYMPTOMS
========

An Advanced Program-to-Program Communications (APPC) application that uses the
SET_TP_PROPERTIES verb to specify a logical unit-of-work identifier (LUWID) may
have its LUWID overwritten by an LUWID that is generated by the SNA Server
service (Snaservr.exe) on a subsequent ALLOCATE exchange.

CAUSE
=====

The APPC library (Wappc32.dll) does not correctly save LUWID values that are
specifically set by a SET_TP_PROPERTIES verb. Therefore, the APPC library allows
the LUWID to be overwritten by an LUWID that is generated by the SNA Server
service.

STATUS
======

SNA Server 4.0:

Microsoft has confirmed this to be a problem in Microsoft SNA Server versions
4.0, 4.0 Service Pack (SP) 1, 4.0 SP2, 4.0 SP3, 4.0 SP4.


Host Integration Server 2000:

Microsoft has confirmed this to be a problem in Microsoft Host Integration Server
2000.



MORE INFORMATION
================

An APPC application that uses the Sync Point feature can use the
SET_TP_PROPERTIES verb to set its LUWIDs. To do this, the SET_TP_PROPERTIES verb
specifies an existing value or asks the SNA Server service to generate a new
one. An LUWID that is set by a SET_TP_PROPERTIES verb should not be overwritten
for the duration of the APPC transaction unless another SET_TP_PROPERTIES verb
is issued with a new LUWID value. An APPC transaction begins with a TP_STARTED
verb and ends with a TP_ENDED verb. The transaction may include multiple
ALLOCATE exchanges.

See the APPC Programmer's Guide in the SNA Server or Host Integration Server 2000
Software Development Kit (SDK) for more details on the SET_TP_PROPERTIES verb.

For additional information on how the SNA Server service generates LUWIDs, click
the article number below to view the article in the Microsoft Knowledge Base:

   Q175375 New Format for Logical Unit of Work Identifier

Additional query words:

======================================================================
Keywords          : kbDSupport sna4 kbsna400sp1 kbsna400sp2 kbsna400sp3 kbhis2000 kbhis2000bug kbsna400sp4 
Technology        : kbAudDeveloper kbSNAServSearch kbHostIntegServ2000 kbSNAServ400 kbSNAServ400SP1 kbSNAServ400SP2 kbSNAServ400SP3 kbSNAServ400SP4
Version           : :4.0,4.0 SP1,4.0 SP2,4.0 SP3,4.0 SP4
Issue type        : kbbug
Solution Type     : kbnofix

=============================================================================

THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.

Copyright Microsoft Corporation 2001.