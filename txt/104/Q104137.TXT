DOCUMENT:Q104137  04-NOV-1999  [win16sdk]
TITLE   :BUG: Iconic MDI Application Titles Do Not Update Properly
PRODUCT :Microsoft Windows Software Development Kit
PROD/VER:WINDOWS:
OPER/SYS:
KEYWORDS:kb16bitonly kbMDI kbGrpDSUser kbOSWin310bug kbWndw kbOSWin311bug

======================================================================
-------------------------------------------------------------------------------
The information in this article applies to:

 - Microsoft Windows Software Development Kit (SDK) 
-------------------------------------------------------------------------------

SYMPTOMS
========

In a Windows 3.1 multiple document interface (MDI) application, the icon title
of the MDI frame window does not update when the SetWindowText function is used
to change the text of the icon title.

CAUSE
=====

In an MDI application, the main window calls DefFrameProc instead of
DefWindowProc to handle unprocessed messages. DefFrameProc does not handle the
WM_SETTEXT message (which is generated by SetWindowText) correctly when the main
window is minimized, because it does not update the title after the change has
been made.

RESOLUTION
==========

To update the minimized MDI frame's title, you can process the MDI frame's
WM_SETTEXT message and call both the DefFrameProc and DefWindowProc functions.
The following code demonstrates this workaround:

      case WM_SETTEXT:
          DefFrameProc (hwnd,hwndMDIClient,msg,wParam,lParam);
          return DefWindowProc (hwnd,msg,wParam,lParam);

Additional query words:

======================================================================
Keywords          : kb16bitonly kbMDI kbGrpDSUser kbOSWin310bug kbWndw kbOSWin311bug 
Technology        : kbAudDeveloper kbSDKSearch kbWinSDKSearch
Version           : WINDOWS:
Issue type        : kbbug

=============================================================================

THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
SO THE FOREGOING LIMITATION MAY NOT APPLY.

Copyright Microsoft Corporation 1999.