<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=4c5dc89ca309d19d6d9171a268a55a16d7399494">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Q44009: C2097 Attempt to Initialize Short Address with Long Address | KnowledgeBase Archive</title>
<meta property="og:title" content="Q44009: C2097 Attempt to Initialize Short Address with Long Address" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/044/Q44009/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/044/Q44009/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"name":null,"description":"An Archive of Early Microsoft KnowledgeBase Articles","author":null,"@type":"WebPage","url":"http://jeffpar.github.io/kbarchive/kb/044/Q44009/","publisher":null,"image":null,"headline":"Q44009: C2097 Attempt to Initialize Short Address with Long Address","dateModified":null,"datePublished":null,"sameAs":null,"mainEntityOfPage":null,"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="http://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q44009-c2097-attempt-to-initialize-short-address-with-long-address">Q44009: C2097 Attempt to Initialize Short Address with Long Address</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q44009
Product(s): See article
Version(s): 1.01 1.00
Operating System(s): MS-DOS
Keyword(s): ENDUSER | | mspl13_c
Last Modified: 2-MAY-1989

When the example below is compiled in the medium memory model, the
compiler returns the following error message:

   C2097  illegal initialization

The following description of this error, which can be found on Page
261 of the "Microsoft C Optimizing Compiler User's Guide" and on Page
331 of the "Microsoft QuickC Programmer's Guide," is incomplete:

   An attempt was made to initialize a variable using a non-constant
   value

Attempting to initialize a short address with a long address is
another type of illegal initialization that can return this error.

The example below demonstrates the problem when compiled in the medium
memory model. The medium memory model is the only memory model
available in Versions 1.00 and 1.01 of the QuickC environment. QuickC
2.00 and the Microsoft C Optimizing Compiler support five memory
models. QuickC 1.00 and 1.01 support four memory models (no huge) when
compiling outside of the environment.

To prevent the problem, compile with either /AS, /AL, or /AH (the
small, large, or huge memory model, respectively). This ensures that
the addresses for data are the same size as the addresses for code.
Alternatively, make appropriate casts when initializing pointers and
specify the far keyword on declarations as necessary.

To compile (but not link) for small model with QuickC, use the
following command line:

   qcl /AS /c test.c

Or, with the Microsoft C Optimizing Compiler, use the following
command line:

   cl /AS /c test.c

The code example is as follows:

/*  example  */

int exit();

typedef struct { void * data;
               } selection;

selection menu[] = { { 0 },            /*  data  */
                     { exit }          /*  code  */
                   };
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="http://github.com/jeffpar">jeffpar</a><br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


</body>
</html>