---
layout: page
title: "Q112286: SMTP: Example of SMTP Gateway Log File"
permalink: /kb/112/Q112286/
---

## Q112286: SMTP: Example of SMTP Gateway Log File

	Article: Q112286
	Product(s): Microsoft Mail For PC Networks
	Version(s): MS-DOS:3.0
	Operating System(s): 
	Keyword(s): 
	Last Modified: 29-OCT-1999
	
	-------------------------------------------------------------------------------
	The information in this article applies to:
	
	- Microsoft Mail Gateway to SMTP, version 3.0 
	-------------------------------------------------------------------------------
	
	The following is the log file that is generated by the Microsoft Mail
	Gateway to SMTP when you start it using the following command:
	
	  smtpgate -cd -lacsy
	
	NOTE: Information in braces {} indicates comments or explanations of the
	log file contents.
	
	MORE INFORMATION
	================
	
	08:50:03 - Tue Feb 23 08:50:03 1993 Microsoft Mail Gateway to SMTP V3.0
	  {Version number listed here}
	08:50:03 - Tue Feb 23 08:50:03 1993 Copyright 1991-1992 Microsoft
	Corporation. All rights reserved.
	08:50:03 - Running from X:\SMTPGATE.EXE
	  {Drive and path location of executable. Also where temporary files
	  are built.}
	08:50:03 - Reading local configuration from m:smtp\local.cfg
	  {Local.cfg made & modified from Admin program, in GATEWAY-SMTP-SETUP}
	08:50:04 -   Local Domain = ".company.com"
	08:50:04 -   SMTP Gateway Host Name = "marvgard"
	08:50:04 -   SMTP Smart-Host IP = "11.1.16.15"
	08:50:04 - Reading local Microsoft Mail Post Offices from m:smtp\local.cfg
	  {LOCAL.CFG made and modified from Administrator program, in Gateway,
	  SMTP, Post Offices}
	08:50:04 -   Local Post-Office: "DEPT/MSPO1"
	08:50:04 -   Local Post-Office: "DEPT/PO2"
	08:50:04 -   Local Post-Office: "washington/seattle3"
	08:50:04 - Reading address map from m:smtp\addr_map.cfg
	  {ADDR_MAP.CFG made and modified from Administrator program, in Gateway,
	   SMTP, Address-Map}
	08:50:04 -   Mapping "DEPT/MSPO1" to "mspo1.dept"
	08:50:04 -   Mapping "dept/mspo1" to "dept"
	08:50:04 -   Mapping "dept/po2" to "po2.dept"
	08:50:04 -   Mapping "washington/seattle3" to "admiral.com"
	08:50:04 - Gateway initialized
	  {Ready for Action!}
	08:58:04 - Idling:  48258 bytes, largest 47234
	  {Memory available for processing mail}
	08:58:04 - spawning SMTPGET
	  {Run SMTPGET.EXE, which checks the SMTP mailbag file in database for
	   outgoing mail}
	
	08:58:04 - spawn(SMTPGET)=0
	  {Find the SMTP mailbag file name by typing "network.glb", and look for 8
	   characters after SMTP}
	08:58:04 - SMTP_accept(socket=256, timeout=120)
	  {Checking socket 256 for incoming SMTP mail for 120 seconds. Timeout
	   specified by -W option}
	08:58:22 - Connection accepted.
	  {A TCP/IP host has contacted the gateway computer}
	08:58:22 - Incoming SMTP connection from [11.1.16.15] detected
	  {Announcing who is connecting to the gateway computer}
	08:58:22 - Call coming in at socket 257
	  {Socket used for incoming SMTP mail}
	 [tx] 220 All set, fire away
	  {Gateway computer transmits saying "I'm ready"}
	 [rx] HELO company.com
	  {Gateway computer receives from TCP/IP host a greeting and introduction}
	 [tx] 250 Hi there, pleased to meet you
	  {Gateway computer transmits a greeting in return}
	 [rx] MAIL From:<root@company.com>
	  {Gateway computer receives RFC821 "From" address, and saves it in
	  SMTP_IN.ENV file}
	08:58:22 - Translating remote address: "root@company.com"
	  {SMTPGATE.EXE tries to translate the address into Microsoft Mail
	  address, using ADDR_MAP.CFG}
	08:58:22 - Comparing: mspo1.dept to company.com
	  {(Compares the domain name in "From" address to all entries in the
	   ADDR_MAP.CFG file)}
	08:58:22 - Comparing: dept to company.com
	08:58:22 - Comparing: po2.dept to company.com
	08:58:22 - Comparing: admiral.com to company.com
	08:58:22 - Comparing: .elvis.com to company.com
	08:58:22 - Non-local address left unmapped
	  {No match is found, so the "From" address is passed on in SMTP format}
	 [tx] 250 Sender OK
	  {Gateway computer transmits that the "From" address is OK}
	 [rx] RCPT To:<admin@mspo1.dept>
	  {Gateway computer receives RFC821 "To" address, and saves it in
	  SMTP_IN.ENV file}
	08:58:22 - Translating local address: "admin@mspo1.dept"
	  {SMTPGATE.EXE tries to translate the address into Microsoft Mail
	  address, using ADDR_MAP.CFG}
	08:58:22 - Comparing: mspo1.dept to mspo1.dept
	  {(Compares the domain name in "To" address to all entries in the
	  ADDR_MAP.CFG file.}
	08:58:22 - Comparing: dept to company.com
	  {If it finds no match, the message will not be accepted and a
	   "550 - Unknown user" error is sent.}
	08:58:22 - Mapped mspo1.dept to DEPT/MSPO1
	  {A match is found.}
	08:58:22 - Mapped to "CSI:DEPT/MSPO1/admin"
	  {The "To" address translated to Microsoft Mail format.}
	 [tx] 250 Recipient OK
	  {Gateway computer transmits that the "To" address is OK}
	 [rx] DATA
	  {Gateway computer is told the RFC-822 message header and body is
	   coming next}
	 [tx] 354 Start mail input; end with <CRLF>.<CRLF>
	  {Gateway computer transmits to start, and to send a <CR/LF>.<CR/LF>
	   to signal the end of the message}
	 [rx] ...message body...
	  {Gateway computer receives the message (RFC-822) and saves it in
	  SMTP_IN.822 file}
	08:58:23 - Sending message to Microsoft Mail
	  {SMTPGATE.EXE starts to process the incoming SMTP message}
	08:58:23 - Header: Return-Path: <root@company.com>
	08:58:23 - Header: Received: from company.com by marvgard
	08:58:23 - Header:      id <2B8A57AE@marvgard>; Tue, 23 Feb 93 08:58:22 PST
	08:58:23 - Header: Received: by company.com (4.1/SMI-4.1)
	08:58:23 - Header:      id AA01410; Tue, 23 Feb 93 08:55:16 PST
	08:58:23 - Header: Date: Tue, 23 Feb 93 08:55:16 PST
	08:58:23 - Header: From: root@company.com (Operator)
	  {SMTPGATE.EXE compares this RFC-822 "From" to the earlier RFC-821
	   "From". If they are the same, the RFC-822 "From" is saved in
	   Microsoft Mail. Otherwise, the RFC-821 is saved.}
	
	08:58:23 - Header: Message-Id: <9302231655.AA01410@company.com>
	08:58:23 - Header: Apparently-To: admin@mspo1.dept
	08:58:23 - Header:
	  {Blank line indicating the end of the headers, and message text is
	   next.}
	08:58:23 - Translating remote address: "root@company.com (Operator)"
	  {SMTPGATE.EXE  tries to translate the address into Microsoft Mail
	   address, using ADDR_MAP.CFG}
	08:58:23 - Comparing: mspo1.dept to company.com (Operator)
	  {(Compares the domain name in "From" address to all entries in the
	   ADDR_MAP.CFG file)}
	08:58:23 - Comparing: dept to company.com (Operator)
	08:58:23 - Comparing: po2.dept to company.com (Operator)
	08:58:23 - Comparing: admiral.com to company.com (Operator)
	08:58:23 - Comparing: .elvis.com to company.com (Operator)
	08:58:23 - Non-local address left unmapped
	  {No match is found, so the "From" address is passed on in SMTP format}
	08:58:23 - spawning SMTPPUT
	  {SMTPPUT.EXE puts the Microsoft Mail formatted message into the
	   Microsoft Mail database}
	08:58:23 - spawn(SMTPPUT)=0
	 [tx] 250
	  {Gateway computer transmits saying it now has the message}
	 [rx] QUIT
	  {Gateway computer receives instruction to quit the connection}
	 [tx] 221 See you later
	  {Gateway computer transmits an acknowledgement and says good bye}
	08:58:24 - Closing socket 257
	08:58:24 - SMTP connection closed
	08:58:49 - Idling:  48258 bytes, largest 47234
	09:02:52 - spawning SMTPGET
	  {Run SMTPGET.EXE, which checks the SMTP mailbag file in database for
	   outgoing mail}
	
	09:02:52 - spawn(SMTPGET)=0
	09:02:52 - Outgoing message(s) from Microsoft Mail detected
	  {SMTPGET.EXE found outgoing mail waiting in the SMTP mailbag}
	09:02:52 - Connecting to smart SMTP host
	  {Gateway computer connects to the smart }
	09:02:52 - SMTP_open(socket=257)
	 [rx] 220 company.com Sendmail 4.1/SMI-4.1 ready at Tue, 23 Feb 93
	09:00:22 PST
	 [tx] HELO marvgard
	 [rx] 250 company.com Hello marvgard ([11.1.16.16]), pleased to meet you
	09:02:53 - NC_addr_to_RFC822( "CSI:DEPT/MSPO1/Admin", local )
	09:02:53 - Translating "DEPT/MSPO1/Admin"
	09:02:53 - Mapped to "Admin@mspo1.dept"
	09:02:53 - NC_addr_to_RFC822( "SMTP:root@company.company.com", remote )
	09:02:53 - NC_addr_to_RFC822( "SMTP:root@company.company.com", local )
	09:02:54 - Transmitting message to SMTP
	 [tx] MAIL FROM:<Admin@mspo1.dept>
	 [rx] 250 <Admin@mspo1.dept>... Sender ok
	 [tx] RCPT TO:<root@company.company.com>
	 [rx] 250 <root@company.company.com>... Recipient ok
	 [tx] DATA
	 [rx] 354 Enter mail, end with "." on a line by itself
	 [tx] ...message body...
	 [tx] .
	 [rx] 250 Mail accepted
	 [tx] QUIT
	 [rx] 221 company.com delivering mail
	09:03:33 - SMTP_close(socket=257)
	09:03:33 - SMTP connection closed
	09:03:33 - Idling:  48258 bytes, largest 47234
	09:03:33 - spawning SMTPGET
	09:03:33 - spawn(SMTPGET)=0
	09:03:33 - SMTP_accept(socket=256, timeout=120)
	09:04:34 - Idling:  48258 bytes, largest 47234
	09:04:34 - OK to Exit?
	09:04:34 - Press Y to exit, N to continue
	
	Additional query words: logfile
	
	======================================================================
	Keywords          :  
	Technology        : kbMailSearch kbMailGateSearch kbZNotKeyword3 kbMailGateSMTP300
	Version           : MS-DOS:3.0
	
	=============================================================================
	
