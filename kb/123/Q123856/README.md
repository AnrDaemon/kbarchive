---
layout: page
title: "Q123856: PC DirSync: How to Distribute Gateway Addresses with Dir-Sync"
permalink: /kb/123/Q123856/
---

## Q123856: PC DirSync: How to Distribute Gateway Addresses with Dir-Sync

{% raw %}

	Article: Q123856
	Product(s): Microsoft Mail For PC Networks
	Version(s): WINDOWS:3.0,3.2,3.2a,3.5
	Operating System(s): 
	Keyword(s): 
	Last Modified: 31-OCT-1999
	
	-------------------------------------------------------------------------------
	The information in this article applies to:
	
	- Microsoft Mail for PC Networks, versions 3.0, 3.2, 3.2a, 3.5 
	-------------------------------------------------------------------------------
	
	SUMMARY
	=======
	
	No File Format Application Programming Interface (FFAPI) Microsoft gateway
	product (MHS, SMTP, X.400, or others) for Microsoft Mail for PC Networks can be
	a requester for directory synchronization (Dir-Sync). Therefore, these gateway
	addresses are not automatically distributed to downstream postoffices during the
	Dir-Sync process. To include gateway addresses in Dir-Sync, the gateway
	addresses, in an import-format text file, must be manually inserted into the
	Dir-Sync process using the Microsoft Mail for PC Networks IMPORT.EXE utility.
	
	A Mail administrator can get the import-format text file by either extracting the
	addresses from an existing Microsoft Mail for PC Networks gateway postoffice
	(using IMPORT.EXE), creating it manually, or obtaining it from a gateway host
	administrator. Refer to Appendix A of the Microsoft Mail for PC Networks
	"Administrator's Guide" for more information about the format of the
	import-format text file.
	
	NOTE: If you are including SMTP, X400, or MHS addresses in groups, you should NOT
	use Dir-Sync to distribute these addresses.
	
	MORE INFORMATION
	================
	
	The REBUILD.EXE utility creates the Global Address List (GAL) on each individual
	postoffice from all the separate address lists on that postoffice. Therefore, if
	a gateway address list exists at a specific postoffice, these addresses will be
	included in the GAL. Most FFAPI-based gateways, the SNADS gateway, and the PROFS
	gateway store their address lists in a hexadecimal identifier (hex-id) .XTN file
	(<hex-id>.XTN). Other gateways, such as the SMTP, X.400, and MHS gateways,
	store their address lists in .NME and .GLB files. For example, the X.400 gateway
	uses X400.NME and X400.GLB.
	
	On any postoffice, these gateway address lists will most likely be created by one
	of two methods:
	
	1. The administrator will run the IMPORT.EXE utility against an import-format
	  text file, thereby populating the .USR or .NME/.GLB files with user address
	  information.
	
	2. The administrator can run the Microsoft Mail Administrator program
	  (ADMIN.EXE) and manually enter the addresses under the Gateway, List menu
	  item.
	
	Either method will create an address list that REBUILD.EXE will incorporate into
	the local GAL at that postoffice. Unfortunately, these addresses are not
	automatically added into the Dir-Sync process.
	
	To automatically include gateway addresses in Dir-Sync, the administrator must
	first have an import-format text file. This file can be generated by one of two
	methods:
	
	1. If the gateway addresses already exist on one of the postoffices, the
	  administrator can extract these addresses into an import-format text file by
	  using the IMPORT.EXE utility with the -X option.
	
	  NOTE: These addresses may have been added by the administrator with the
	  ADMIN.EXE program (by selecting Gateway, List).
	
	  The IMPORT.EXE command line for this extraction process is (this command line
	  has been wrapped for readability; you should type the entire command on one
	  line):
	
	  " import admin -p<password> -x -g<address_type>
	  -f<ex_file>.txt -d<drive>" (without the quotation marks)
	
	  where <ex_file>.TXT is the extracted import-format text file (IMPORT.EXE
	  will automatically create such a file with the proper format) and
	  <address_type> is, for example, SMTP, SNADS, or X400, as outlined in
	  Appendix A of the "Administrator's Guide."
	
	2. If the gateway addresses do not already exist on one of the postoffices, use
	  a standard text editor to create this import-format text file, as outlined in
	  Appendix A of the "Administrator's Guide" under the "IMPORT Utility"
	  description.
	
	  After the gateway software (gateway & access component) are installed and
	  configured on the gateway postoffice and gateway access components are
	  installed on downstream postoffices, create or acquire the import-format text
	  file that contains your gateway addresses. (See Appendix A under the
	  IMPORT.EXE utility of the Microsoft Mail for PC Networks Administrator's
	  Guide for additional information on the format of this import-format text
	  file.) Import these addresses for Dir-Sync on any postoffice (usually the
	  gateway postoffice) that has the gateway access component installed by
	  typing:
	
	  " import admin -p<password> -e -f<ex_file.txt> -d<drive>"
	  (without the quotation marks)
	
	  Where EX_FILE.TXT is the import-format text file created either by the
	  extraction process listed in Step 1 above or by a text editor.
	
	  The use of the IMPORT.EXE utility with the -E option will populate the
	  REQTRANS.GLB on the postoffice with all of the gateway addresses listed in
	  the import-format text file. The Dir-Sync server must have the gateway access
	  component installed for these addresses to be accepted and propagated.
	
	  NOTE: The administrator must install the gateway access component on each
	  postoffice that will receive gateway address updates during Dir-Sync.
	
	For additional information, please see the following article in the Microsoft
	Knowledge Base:
	
	  Q137865 PC DirSync: Incorrect SMTP Addresses in POL After Dir-Sync
	
	Additional query words: 3.00 3.20 3.20a 3.50 dirsync dirsynch
	
	======================================================================
	Keywords          :  
	Technology        : kbMailSearch kbZNotKeyword3 kbMailPCN320 kbMailPCN320a kbMailPCN300 kbMailPCN350
	Version           : WINDOWS:3.0,3.2,3.2a,3.5
	
	=============================================================================
	

{% endraw %}
